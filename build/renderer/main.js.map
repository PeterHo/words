{"version":3,"sources":["../../src/renderer/main.js"],"names":["Promise","require","window","$","jQuery","jquery","fs","path","constants","FILES_PATH","muiTheme","fontFamily","palette","primary1Color","ipcRenderer","controlNewNoteMenu","globalBook","subscribe","getState","_id","send","document","addEventListener","getElementById","on","event","preventDefault","stopPropagation","href","attr","pp","test"],"mappings":";;AAOA;;;;AACA;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AAKA;;;;AAIA;;;;AACA;;;;;;AAvBAA,UAAUC,QAAQ,UAAR,CAAV;AACAC,OAAOC,CAAP,GAAWD,OAAOE,MAAP,GAAgBF,OAAOG,MAAP,GAAgBJ,QAAQ,QAAR,CAA3C;AACAA,QAAQ,gBAAR;;AAEA,IAAMK,KAAKL,QAAQ,IAAR,CAAX;AAAA,IACIM,OAAON,QAAQ,MAAR,CADX;;AAUAC,OAAOM,SAAP;IACMC,U,uBAAAA,U;;AAEN;;AAEA;;AAEA;;;AAIA,IAAMC,WAAW,2BAAY;AAC3BC,cAAY,qJADe;AAE3BC,WAAS;AACPC,mBAAe;AADR;AAFkB,CAAZ,CAAjB;;AAOA,IAAMC,cAAcb,QAAQ,UAAR,EAAoBa,WAAxC;;AAGA;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAIC,aAAa,IAAjB;AACA,kBAAMC,SAAN,CAAgB,YAAM;AACpB,QAAI,CAAC,CAAC,gBAAMC,QAAN,GAAiBF,UAAjB,CAA4BG,GAA/B,IAAuCH,UAA1C,EAAqD;AACnDA,mBAAc,CAAC,CAAC,gBAAME,QAAN,GAAiBF,UAAjB,CAA4BG,GAA5C;AACA,UAAG,gBAAMD,QAAN,GAAiBF,UAAjB,CAA4BG,GAA/B,EAAmC;AACjCL,oBAAYM,IAAZ,CAAiB,YAAjB,EAA+B,UAA/B;AACD,OAFD,MAEK;AACHN,oBAAYM,IAAZ,CAAiB,aAAjB,EAAgC,UAAhC;AACD;AACF;AACF,GATD;AAUD;;AAEDL;;AAEAM,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACvD,wBACE;AAAA;AAAA,MAAU,sBAAV;AACE;AAAA;AAAA,QAAkB,UAAUZ,QAA5B;AACE;AADF;AADF,GADF,EAMEW,SAASE,cAAT,CAAwB,MAAxB,CANF;AAQD,CATD,EASG,KATH;;AAWArB,OAAOO,UAAP,GAAoBA,UAApB;;AAEA;AACAN,EAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,YAAtB,EAAoC,UAASC,KAAT,EAAgB;AAClDA,QAAMC,cAAN;AACAD,QAAME,eAAN;AACA,MAAIC,OAAOzB,EAAE,IAAF,EAAQ0B,IAAR,CAAa,MAAb,CAAX;AACA,MAAIC,KAAK,cAAT;AACA,MAAGA,GAAGC,IAAH,CAAQH,IAAR,CAAH,EAAiB;AACfd,gBAAYM,IAAZ,CAAiB,cAAjB,EAAiCQ,IAAjC;AACD;AACF,CARD","file":"main.js","sourcesContent":["Promise = require('bluebird');\nwindow.$ = window.jQuery = window.jquery = require('jquery');\nrequire('babel-polyfill');\n\nconst fs = require('fs'),\n    path = require('path');\n\nimport React from 'react';\nimport { render } from 'react-dom';\nimport App from './views/app';\nimport { files, books, tags, infos } from '../main/set_db';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport constants from '../constants';\nwindow.constants = constants;\nlet { FILES_PATH } = constants;\n\n// material-ui use the plugin\nimport injectTapEventPlugin from 'react-tap-event-plugin';\ninjectTapEventPlugin();\n\n// material-ui theme provider\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\n\nconst muiTheme = getMuiTheme({\n  fontFamily: '\"YaHei Consolas Hybrid\", Consolas, 微软雅黑, \"Meiryo UI\", \"Malgun Gothic\", \"Segoe UI\", \"Trebuchet MS\", Helvetica, Monaco, courier, monospace !important',\n  palette: {\n    primary1Color: '#e78170'\n  }\n});\n\nconst ipcRenderer = require('electron').ipcRenderer;\n\n\n// subscribe redux to control new note menu item\nfunction controlNewNoteMenu() {\n  var globalBook = null;\n  store.subscribe(() => {\n    if((!!store.getState().globalBook._id) != globalBook){\n      globalBook = (!!store.getState().globalBook._id);\n      if(store.getState().globalBook._id){\n        ipcRenderer.send('enableItem', 'New Note');\n      }else{\n        ipcRenderer.send('disableItem', 'New Note');\n      }\n    }\n  });\n}\n\ncontrolNewNoteMenu();\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  render(\n    <Provider store={store}>\n      <MuiThemeProvider muiTheme={muiTheme}>\n        <App/>\n      </MuiThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n  );\n}, false);\n\nwindow.FILES_PATH = FILES_PATH;\n\n// prevent external link open from browser\n$('body').on('click', 'a.external', function(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  let href = $(this).attr('href');\n  var pp = /[http|https]/;\n  if(pp.test(href)){\n    ipcRenderer.send('openExternal', href);\n  }\n});\n"]}