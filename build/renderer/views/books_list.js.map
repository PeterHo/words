{"version":3,"sources":["../../../src/renderer/views/books_list.js"],"names":["styles","root","display","flexWrap","justifyContent","marginTop","gridList","width","overflowY","marginBottom","BooksList","props","gridCols","refs","listRoot","getBoundingClientRect","setState","handleMenuChange","event","value","book","parseInt","console","log","callbacks","editBook","delBook","state","throttledGridCols","window","addEventListener","cancel","nextProps","nextState","books","map","_id","name","filesCount","stopPropagation","onContextMenu","jumpToNotes","pathname","query","bookId","bookName","available","imagePath","TMP_IMAGE_PATH","propTypes","array","object"],"mappings":"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","file":"books_list.js","sourcesContent":["import React, {\n    Component,\n    PropTypes\n} from 'react';\nimport shallowCompare from 'react-addons-shallow-compare';\nimport {\n    GridList,\n    GridTile\n} from 'material-ui/GridList';\nimport IconButton from 'material-ui/IconButton';\nimport Subheader from 'material-ui/Subheader';\nimport Settings from 'material-ui/svg-icons/action/settings';\nimport IconMenu from 'material-ui/IconMenu';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport constants from '../../constants';\nimport {\n    key2path,\n    throttle\n} from '../../util';\nimport {\n    Link\n} from 'react-router';\nconst styles = {\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    marginTop: '20px'\n  },\n  gridList: {\n    width: '90%',\n    overflowY: 'auto',\n    marginBottom: 24\n  },\n};\n\n// props {callbacks, books}\nclass BooksList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gridCols: 4\n    }\n    this.throttledGridCols = throttle(this.gridCols, 10);\n  }\n\n  componentDidMount() {\n    // add a throttle process\n    window.addEventListener('resize', this.gridCols);\n  }\n\n  componentWillUnmount() {\n    if(this.throttledGridCols)\n      this.throttledGridCols.cancel();\n  }\n\n  // for better performance\n  shouldComponentUpdate (nextProps, nextState) {\n    return shallowCompare(this, nextProps, nextState);\n  }\n\n  gridCols = () => {\n    if(!this.refs.listRoot)\n      return\n    let width = this.refs.listRoot.getBoundingClientRect().width;\n    // js switch add true when in case use less or greater than\n    switch (true) {\n      case width > 800:\n        this.setState({\n          gridCols: 4\n        });\n        break;\n      case width > 600:\n        this.setState({\n          gridCols: 3\n        });\n        break;\n      case width > 400:\n        this.setState({\n          gridCols: 2\n        });\n        break;\n      default:\n        this.setState({\n          gridCols: 1\n        });\n    }\n  }\n\n  handleMenuChange = (event, value, book) => {\n    // edit\n    if(parseInt(value) == 1){\n      console.log('edit book');\n      this.props.callbacks.editBook(book);\n    // delete\n    }else if (parseInt(value) == 2){\n      this.props.callbacks.delBook(book);\n    }\n  }\n\n  render() {\n    return (\n      <div style={styles.root} ref='listRoot'>\n        <GridList\n          cellHeight={200}\n          style={styles.gridList}\n          cols={this.state.gridCols}\n          padding={20}\n        >\n          {this.props.books.map((book) => {\n            return (\n                      <GridTile\n                          key={book._id}\n                          title={book.name}\n                          subtitle={<span><b>{book.filesCount} Notes</b></span>}\n                          actionIcon={\n                            <IconMenu\n                              iconButtonElement={<IconButton><Settings color=\"white\" /></IconButton>}\n                              onChange={(event, value) => { event.stopPropagation(); this.handleMenuChange(event, value, book)}}\n                              value={0}\n                            >\n                              <MenuItem value=\"1\" primaryText=\"Edit...\" />\n                              <MenuItem value=\"2\" primaryText=\"Move To Trash...\" />\n                            </IconMenu> }\n                          cols={1}\n                          className='book-item'\n                          onContextMenu={(event) => {event.stopPropagation();this.props.callbacks.onContextMenu(event, book);}}\n                        >\n                        <img\n                          onClick={(event) => {this.props.callbacks.jumpToNotes({pathname: '/notes', query: {bookId: book._id, bookName: book.name, available: true}})}}\n                          src={book.imagePath != '' ? key2path(book.imagePath) : constants.TMP_IMAGE_PATH}\n                        />\n                      </GridTile>\n                    )\n          })}\n        </GridList>\n      </div>\n    );\n  }\n}\n\nBooksList.propTypes = {\n  books: PropTypes.array,\n  callbacks: PropTypes.object\n};\n\nexport default BooksList;\n"]}