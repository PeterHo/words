{"version":3,"sources":["../../../src/renderer/views/layout.js"],"names":["Layout","props","globalSearch","event","preventDefault","stopPropagation","push","pathname","query","searchFileText","state","available","changeSearchFileText","setState","target","value","componentDidMount","replace","newNoteBook","patt","RegExp","test","location","Object","assign","newNote","fileParams","insert","error","newFile","emit","jQuery","findDOMNode","refs","notesLink","click","$","hasClass","trashLink","newProps","globalSearchInput","find","val","right","position","marginRight","color","children"],"mappings":"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","file":"layout.js","sourcesContent":["import React, {\n    Component\n} from 'react';\nimport {\n    Link,\n    IndexLink\n} from 'react-router';\nimport {\n    List,\n    ListItem\n} from 'material-ui/List';\nimport TextField from 'material-ui/TextField';\nimport Menu from 'material-ui/Menu';\nimport MenuItem from 'material-ui/MenuItem';\nimport {\n    hashHistory\n} from 'react-router';\nimport ReactDom from 'react-dom';\nimport {setDispatchHandler} from '../dispatch_handlers'\nimport {\n    files\n} from '../../main/set_db';\nimport singleEvent from '../single_event';\nimport {setupIpc} from '../setup_ipc';\n\nclass Layout extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchFileText: props.location.query.searchFileText || ''\n        };\n    }\n\n    globalSearch = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        hashHistory.push({pathname: '/notes', query: {searchFileText: this.state.searchFileText, available: true}});\n    }\n\n    changeSearchFileText = (event) => {\n        this.setState({\n            searchFileText: event.target.value\n        });\n    }\n\n    // maybe not a legant way, the method break the react lifecycle!!!\n    componentWillReceiveProps(newProps) {\n        if (newProps.location.query.searchFileText != this.state.searchFileText) {\n            this.setState({searchFileText: newProps.location.query.searchFileText || ''});\n            jQuery(ReactDom.findDOMNode(this.refs.globalSearchInput)).find('input').val(newProps.location.query.searchFileText || '');\n        }\n    }\n\n    componentDidMount = () => {\n        setupIpc();\n        // 配些全局的相应appmenu的event\n        setDispatchHandler('newNoteBook', () => {\n            hashHistory.replace({\n                pathname: '/',\n                query: {\n                    newNoteBook: true\n                }\n            });\n        });\n        setDispatchHandler('newNote', () => {\n            let patt = new RegExp('notes');\n            if (patt.test(this.props.location.pathname)) {\n                hashHistory.push({\n                    pathname: this.props.location.pathname,\n                    query: Object.assign({}, this.props.location.query, {available: true, newNote: true})\n                });\n            } else {\n                hashHistory.push({\n                    pathname: '/notes',\n                    query: {available: true, newNote: true}\n                });\n            }\n        });\n\n        //new note From tray\n        setDispatchHandler('newNoteFromTray', (fileParams) => {\n            files.insert(fileParams, (error, newFile) => {\n                singleEvent.emit('addNoteFromTray', newFile)\n            });\n        });\n\n        // hack notes和trash的相应\n        jQuery(ReactDom.findDOMNode(this.refs.notesLink)).click(function (event) {\n            if ($(this).hasClass('active'))\n                event.preventDefault();\n        });\n        jQuery(ReactDom.findDOMNode(this.refs.trashLink)).click(function (event) {\n            if ($(this).hasClass('active'))\n                event.preventDefault();\n        });\n    }\n\n    render() {\n        return (\n            <div className='body'>\n                <div className='header'>\n                    <form onSubmit={this.globalSearch}>\n                        <TextField\n                            hintText=\"Search notes\"\n                            style={{right: '0px', position: 'absolute', marginRight: '10px'}}\n                            inputStyle={{color: 'white'}}\n                            hintStyle={{color: 'white'}}\n                            defaultValue={this.state.searchFileText || ''}\n                            onChange={this.changeSearchFileText}\n                            ref='globalSearchInput'\n                        />\n                    </form>\n                </div>\n                <div className='sidebar'>\n                    <div className='banner'><p>njoy ANOTE d</p></div>\n                    <ul className='s-menu main-menu'>\n                        <li><IndexLink to='/' activeClassName='active'>Notebooks</IndexLink></li>\n                        <li>\n                            <Link\n                                to={{pathname: '/notes', query: {available: true}}}\n                                activeClassName='active'\n                                ref='notesLink'\n                            >\n                                Notes\n                            </Link>\n                        </li>\n                        <li>\n                            <Link\n                                to={{pathname: '/notes', query: {available: false}}}\n                                activeClassName='active'\n                                ref='trashLink'\n                            >\n                                Trash\n                            </Link>\n                        </li>\n                        {/* <li><Link to='/test' activeClassName='active'>playstation</Link></li> */}\n                    </ul>\n                </div>\n                <div className='content'>\n                    {this.props.children}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Layout;\n"]}