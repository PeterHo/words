{"version":3,"sources":["../../src/main/set_db.js"],"names":["path","require","Datastore","db","files","filename","resolve","DB_PATH","autoload","timestampData","books","tags","infos","ensureIndex","fieldName","unique","err","module","exports"],"mappings":";;AAGA;;;;;;AAHA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,YAAYD,QAAQ,MAAR,CAAlB;AACA,IAAME,KAAK,EAAX;;;AAGAA,GAAGC,KAAH,GAAW,IAAIF,SAAJ,CAAc;AACrBG,cAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CADW;AAErBC,cAAU,IAFW;AAGrBC,mBAAe;AAHM,CAAd,CAAX;;AAMAN,GAAGO,KAAH,GAAW,IAAIR,SAAJ,CAAc;AACrBG,cAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CADW;AAErBC,cAAU,IAFW;AAGrBC,mBAAe;AAHM,CAAd,CAAX;;AAMAN,GAAGQ,IAAH,GAAU,IAAIT,SAAJ,CAAc;AACpBG,cAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,QAAhC,CADU;AAEpBC,cAAU,IAFU;AAGpBC,mBAAe;AAHK,CAAd,CAAV;;AAMAN,GAAGS,KAAH,GAAW,IAAIV,SAAJ,CAAc;AACrBG,cAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CADW;AAErBC,cAAU,IAFW;AAGrBC,mBAAe;AAHM,CAAd,CAAX;;AAMAN,GAAGO,KAAH,CAASG,WAAT,CAAqB,EAACC,WAAW,WAAZ,EAArB;AACAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAACC,WAAW,WAAZ,EAArB;AACAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAACC,WAAW,QAAZ,EAArB;AACAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAACC,WAAW,KAAZ,EAAmBC,QAAQ,IAA3B,EAArB,EAAuD,UAAUC,GAAV,EAAe,CACrE,CADD;;AAGAC,OAAOC,OAAP,GAAiBf,EAAjB","file":"set_db.js","sourcesContent":["const path = require('path');\nconst Datastore = require('nedb');\nconst db = {};\nimport constants from '../constants';\n\ndb.files = new Datastore({\n    filename: path.resolve(constants.DB_PATH, './files'),\n    autoload: true,\n    timestampData: true\n});\n\ndb.books = new Datastore({\n    filename: path.resolve(constants.DB_PATH, './books'),\n    autoload: true,\n    timestampData: true\n});\n\ndb.tags = new Datastore({\n    filename: path.resolve(constants.DB_PATH, './tags'),\n    autoload: true,\n    timestampData: true\n});\n\ndb.infos = new Datastore({\n    filename: path.resolve(constants.DB_PATH, './infos'),\n    autoload: true,\n    timestampData: true\n});\n\ndb.books.ensureIndex({fieldName: 'updatedAt'});\ndb.files.ensureIndex({fieldName: 'updatedAt'});\ndb.files.ensureIndex({fieldName: 'bookId'});\ndb.files.ensureIndex({fieldName: '_id', unique: true}, function (err) {\n});\n\nmodule.exports = db;\n"]}