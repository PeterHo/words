{"version":3,"sources":["../../src/main/set_db.js"],"names":["path","require","Datastore","db","files","filename","resolve","DB_PATH","autoload","timestampData","books","tags","infos","ensureIndex","fieldName","unique","err","module","exports"],"mappings":";;AAGA;;;;;;AAHA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AAAA,IACEC,YAAYD,QAAQ,MAAR,CADd;AAAA,IAEEE,KAAK,EAFP;;AAIEA,GAAGC,KAAH,GAAW,IAAIF,SAAJ,CAAc,EAACG,UAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CAAX;AACvBC,YAAU,IADa;AAEvBC,iBAAe,IAFQ,EAAd,CAAX,EAGAN,GAAGO,KAAH,GAAW,IAAIR,SAAJ,CAAc,EAACG,UAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CAAX;AACvBC,YAAU,IADa;AAEvBC,iBAAe,IAFQ,EAAd,CAHX,EAMAN,GAAGQ,IAAH,GAAU,IAAIT,SAAJ,CAAc,EAACG,UAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,QAAhC,CAAX;AACtBC,YAAU,IADY;AAEtBC,iBAAe,IAFO,EAAd,CANV,EASAN,GAAGS,KAAH,GAAW,IAAIV,SAAJ,CAAc,EAACG,UAAUL,KAAKM,OAAL,CAAa,oBAAUC,OAAvB,EAAgC,SAAhC,CAAX;AACvBC,YAAU,IADa;AAEvBC,iBAAe,IAFQ,EAAd,CATX;;AAaFN,GAAGO,KAAH,CAASG,WAAT,CAAqB,EAAEC,WAAW,WAAb,EAArB;AACAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAAEC,WAAW,WAAb,EAArB;AACAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAAEC,WAAW,QAAb,EAArB;;AAEAX,GAAGC,KAAH,CAASS,WAAT,CAAqB,EAAEC,WAAW,KAAb,EAAoBC,QAAQ,IAA5B,EAArB,EAAyD,UAAUC,GAAV,EAAe,CACvE,CADD;;AAGAC,OAAOC,OAAP,GAAiBf,EAAjB","file":"set_db.js","sourcesContent":["const path = require('path'),\n  Datastore = require('nedb'),\n  db = {};\nimport constants from '../constants';\n  db.files = new Datastore({filename: path.resolve(constants.DB_PATH, './files'),\n    autoload: true,\n    timestampData: true}),\n  db.books = new Datastore({filename: path.resolve(constants.DB_PATH, './books'),\n    autoload: true,\n    timestampData: true}),\n  db.tags = new Datastore({filename: path.resolve(constants.DB_PATH, './tags'),\n    autoload: true,\n    timestampData: true}),\n  db.infos = new Datastore({filename: path.resolve(constants.DB_PATH, './infos'),\n    autoload: true,\n    timestampData: true});\n\ndb.books.ensureIndex({ fieldName: 'updatedAt' });\ndb.files.ensureIndex({ fieldName: 'updatedAt' });\ndb.files.ensureIndex({ fieldName: 'bookId' });\n\ndb.files.ensureIndex({ fieldName: '_id', unique: true }, function (err) {\n})\n\nmodule.exports = db;\n"]}