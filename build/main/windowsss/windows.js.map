{"version":3,"sources":["../../../src/main/windowsss/windows.js"],"names":["main","module","exports","init","show","hide","send","dispatch","win","electron","require","app","BrowserWindow","path","width","height","icon","loadURL","resolve","__dirname","on","length","mainRenderReady","args","push"],"mappings":";;AAcA;;AAdA,IAAIA,OAAOC,OAAOC,OAAP,GAAiB;AACxBC,cADwB;AAExBC,cAFwB;AAGxBC,cAHwB;AAIxBC,cAJwB;AAKxBC,sBALwB;AAMxBC,SAAK;AANmB,CAA5B;;AASA,IAAMC,WAAWC,QAAQ,UAAR,CAAjB;IACOC,G,GAAsBF,Q,CAAtBE,G;IAAKC,a,GAAiBH,Q,CAAjBG,a;;;AAEZ,IAAMC,OAAOH,QAAQ,MAAR,CAAb;;AAIA,SAASP,IAAT,GAAgB;AACZ,QAAIH,KAAKQ,GAAT,EAAc;AACV,eAAOR,KAAKQ,GAAL,CAASJ,IAAT,EAAP;AACH;;AAED,QAAII,MAAMR,KAAKQ,GAAL,GAAW,IAAII,aAAJ,CAAkB;AACnCE,eAAO,IAD4B;AAEnCC,gBAAQ,GAF2B;AAGnCC,cAAM;AAH6B,KAAlB,CAArB;;AAMAR,QAAIS,OAAJ,aAAsBJ,KAAKK,OAAL,CAAaC,SAAb,EAAwB,2BAAxB,CAAtB;;AAEAX,QAAIY,EAAJ,CAAO,QAAP,EAAiB,YAAY;AACzBZ,cAAMR,KAAKQ,GAAL,GAAW,IAAjB;AACA,0BAAaa,MAAb,GAAsB,CAAtB;AACAV,YAAIW,eAAJ,GAAsB,KAAtB;AACH,KAJD;AAKH;;AAED,SAAShB,IAAT,GAAuB;AAAA,sCAANiB,IAAM;AAANA,YAAM;AAAA;;AACnB,QAAI,CAACvB,KAAKQ,GAAN,IAAa,CAACG,IAAIW,eAAtB,EAAuC;AACnC,0BAAaE,IAAb,CAAkBD,IAAlB;AACH,KAFD,MAEO;AAAA;;AACH,0BAAKf,GAAL,EAASF,IAAT,kBAAiBiB,IAAjB;AACH;AACJ;;AAED,SAAShB,QAAT,GAA2B;AAAA,uCAANgB,IAAM;AAANA,YAAM;AAAA;;AACvBjB,2BAAK,UAAL,SAAoBiB,IAApB;AACH","file":"windows.js","sourcesContent":["var main = module.exports = {\n    init,\n    show,\n    hide,\n    send,\n    dispatch,\n    win: null\n};\n\nconst electron = require('electron')\nconst {app, BrowserWindow} = electron;\n\nconst path = require('path')\n\nimport {mainMsgQueue} from '../ipc.js';\n\nfunction init() {\n    if (main.win) {\n        return main.win.show();\n    }\n\n    var win = main.win = new BrowserWindow({\n        width: 1000,\n        height: 800,\n        icon: '../../../static/images/app-icon.jpeg'\n    });\n\n    win.loadURL(`file://${path.resolve(__dirname, '../../../static/main.html')}`)\n\n    win.on('closed', function () {\n        win = main.win = null;\n        mainMsgQueue.length = 0;\n        app.mainRenderReady = false;\n    })\n}\n\nfunction send(...args) {\n    if (!main.win || !app.mainRenderReady) {\n        mainMsgQueue.push(args);\n    } else {\n        main.win.send(...args);\n    }\n}\n\nfunction dispatch(...args) {\n    send('dispatch', ...args);\n}\n"]}