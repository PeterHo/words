{"version":3,"sources":["../../src/main/ipc.js"],"names":["wnd","electron","require","app","mainMsgQueue","init","ipc","ipcMain","on","e","mainRenderReady","forEach","message","mainWnd","send","length","console","log","event","arg","args","dispatch","exports"],"mappings":";;AAEA;;IAAYA,G;;AACZ;;;;;;AAHA,IAAMC,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,MAAMF,SAASE,GAArB;;;AAIA,IAAIC,eAAe,EAAnB;;AAEA,IAAMC,OAAO,SAAPA,IAAO,GAAM;AACf,QAAIC,MAAML,SAASM,OAAnB;;AAEAD,QAAIE,EAAJ,CAAO,iBAAP,EAA0B,UAAUC,CAAV,EAAa;AACnCN,YAAIO,eAAJ,GAAsB,IAAtB;;AAEA;AACAN,qBAAaO,OAAb,CAAqB,UAAUC,OAAV,EAAmB;AACpC,gBAAIZ,IAAIa,OAAR,EAAiB;AAAA;;AACb,oCAAIA,OAAJ,EAAYC,IAAZ,wCAAoBF,OAApB;AACH;AACJ,SAJD;;AAMAR,qBAAaW,MAAb,GAAsB,CAAtB;AACAC,gBAAQC,GAAR,CAAY,8BAAZ;AACH,KAZD;;AAcAX,QAAIE,EAAJ,CAAO,aAAP,EAAsB,UAACU,KAAD,EAAQC,GAAR,EAAgB;AAClC,sBAAI,sCAAJ;AACH,KAFD;;AAIAb,QAAIE,EAAJ,CAAO,SAAP,EAAkB,UAACU,KAAD,EAAoB;AAAA;;AAAA,0CAATE,IAAS;AAATA,gBAAS;AAAA;;AAClC,YAAIpB,IAAIa,OAAR,EAAiB;AAAA;;AACb,mBAAO,qBAAIA,OAAJ,EAAYQ,QAAZ,sBAAwBD,IAAxB,CAAP;AACH;AACDpB,YAAIa,OAAJ,CAAYR,IAAZ;AACA,6BAAIQ,OAAJ,EAAYQ,QAAZ,sBAAwBD,IAAxB;AACH,KAND;AAOH,CA5BD;;AA8BAE,QAAQlB,YAAR,GAAuBA,YAAvB;AACAkB,QAAQjB,IAAR,GAAeA,IAAf","file":"ipc.js","sourcesContent":["const electron = require('electron');\nconst app = electron.app;\nimport * as wnd from './windows';\nimport {log} from './log';\n\nvar mainMsgQueue = [];\n\nconst init = () => {\n    var ipc = electron.ipcMain;\n\n    ipc.on('mainRenderReady', function (e) {\n        app.mainRenderReady = true;\n\n        // 暂存msg的queue\n        mainMsgQueue.forEach(function (message) {\n            if (wnd.mainWnd) {\n                wnd.mainWnd.send(...message);\n            }\n        });\n\n        mainMsgQueue.length = 0;\n        console.log('mainRenderReady ............');\n    });\n\n    ipc.on('ipcTestMain', (event, arg) => {\n        log('main prcess received the ipcTestMain');\n    });\n\n    ipc.on('mainCmd', (event, ...args) => {\n        if (wnd.mainWnd) {\n            return wnd.mainWnd.dispatch(...args);\n        }\n        wnd.mainWnd.init();\n        wnd.mainWnd.dispatch(...args);\n    });\n};\n\nexports.mainMsgQueue = mainMsgQueue;\nexports.init = init;\n"]}